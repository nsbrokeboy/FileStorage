# FileStorage
Web-API загрузки, просмотра и скачивания файлов, спроектированное по принципам Clean Architecture.

Функционал:
  1. Пользователь может одним запросом загрузить группу файлов (1...N).
  2. Пользователь может посредством запроса узнать на сколько процентов загружен конкретный файл или группа файлов в целом.
  3. Пользователь может просмотреть список загруженных файлов или групп файлов.
  4. Пользователь может одним запросом скачать файл или группу файлов.
  5. Пользователь может сгенерировать одноразовую ссылку для файла или группы файлов.
  6. Пользователь может одним запросом скачать чужой файл или группу файлов с помощью предоставленной ему одноразовой ссылки.

P.S. Пользователь имеет доступ только к загруженным им файлам, если не указано обратное.

## Стэк
* Backend: .NET 6
* ORM: EntityFramework
* DBMS: PostgreSQL
* Documentations: Swagger
* Deployment: Docker

# Настройка конфигурации
Конфигурационный файл - `src/FileStorage.Api/appsettings.json`
* Секция BaseDirectoriesNames
  1. DataFolder: название папки с данными
  2. UploadsFolder: название папки под выгрузку файлов
* MaxFileSizeKilobytes: максимальный размер файла в клиобайтах

Строка подключения задается как переменная среды `NpgsqlConnectionString`. Для локальной отладки можно задать её в user-secrets (они подключены):
```bash
dotnet user-secrets init
dotnet user-secrets set "NpgsqlConnectionString" "YourConnectionString"
```

# Инструкция по развертыванию
1. Склонировать репозиторий
2. Перейти в директорию `docker`
3. Изменить строку подключения `NpgsqlConnectionString` в переменных среды, указанных в `docker-compose.yml`
4. Выполнить
```bash
docker-compose up
```
5. API будет развернуто на `localhost:5001`. Документация (Swagger): `localhost:5001/swagger/index.html` 
